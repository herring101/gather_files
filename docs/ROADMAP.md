# gather_files – 開発ロードマップ

このドキュメントは **中期 (v0.3 → v0.5)** と長期の開発項目をまとめたものです。<br>バージョンは目安であり、厳密なリリース時期を保証するものではありません。

---

## 1. Outline／Graph サブシステム (v0.3.x)

| 予定バージョン | 追加／変更内容                                                                          | メモ                                                        |
| -------------- | --------------------------------------------------------------------------------------- | ----------------------------------------------------------- |
| **v0.3.0**     | `.gather` に **`[mode]` セクション** 追加<br>値は `full` / `outline` / `graph` / `skip` | 既存の `[exclude]` 等を置き換えずに柔軟制御                 |
|                | **Rust 専用アウトライン抽出**                                                           | `syn` で AST 解析 → `pub` アイテム＋ドキュメント抽出        |
| **v0.3.1**     | **外部グラフ生成コマンド** 対応<br>`graph.command` / `graph.output` キー                | 成功すれば出力レポートにリンクを自動追記                    |
|                | **依存グラフリンク出力**                                                                | "Dependency graph → gather/deps.dot" を挿入                 |
| **v0.3.2**     | **Markdown / Python** のアウトライン対応                                                | Markdown: 見出し階層抽出 / Python: `ast` でクラス・def 抽出 |
| **v0.3.3**     | **Graph → SVG** 自動変換 (オプトイン)                                                   | `dot` があれば SVG 生成しインライン表示                     |

### ストレッチ (v0.4+)

- Rust の **call‑graph** を `rust‑analyzer` ベースで内蔵
- Mermaid 出力サポート（GitHub Preview 向け）
- アウトライン生成時に **トークン数試算** を CLI で表示

---

## 2. UX / CLI 改善 (v0.3.x → v0.4.x)

- `.gather` に `graph.command` が無い場合でも `deps.dot` を検出したら自動リンク
- `--preset <name>` で Web／Python／Rust などのテンプレートを即適用
- `clap_complete` によるシェル補完スクリプト生成
- 進捗表示を **indicatif** に置き換え ETA ＋スピナーを実装

---

## 3. パフォーマンス & 安定性

| 項目                                   | 状態        |
| -------------------------------------- | ----------- |
| `rayon` で並列ファイル読み込み         | v0.3.x 予定 |
| 大きなバッファを避け**逐次書込**へ変更 | todo        |
| 手書きパーサ → **`serde` TOML** へ移行 | backlog     |

---

## 4. エコシステム連携

- **VS Code 拡張** – コマンドパレットで gather を実行＆プレビュー
- **Neovim プラグイン** – `:GatherFiles` ラッパを Lua で実装
- **OpenAI ファイル API** への直接アップロード（API 安定後）

---

## 5. 長期的アイデア (> v0.5)

- `git diff` ベースの **差分モード** で再生成コストを最小化
- 多言語対応の **トークンカウンタ** – GPT‑4o 制限を考慮
- `crossterm` 製 **対話型 TUI** でインクルード／除外をライブ編集
- **プラグイン SDK** でコミュニティが言語パーサを追加可能に

---

### コントリビュート

詳細は **[CONTRIBUTING.md](../CONTRIBUTING.md)** を参照してください。GitHub Issue にはロードマップタグが付いているので、興味のある項目があればぜひご参加を！
